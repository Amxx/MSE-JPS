function openPopup(){var a=$("<dialog/>").addClass("popup").appendTo("body");dialogPolyfill.registerDialog(a[0]);a[0].showModal();return a}function closePopup(a){a[0].close();a.remove()}function popup_input(c,d,a){var b=openPopup();b.append($("<h4/>").text(c)).append($("<input/>").attr("type","text").val(a));b.find("input").keyup(function(e){switch(e.which){case 13:closePopup(b);if(d){d(this.value)}break;case 27:closePopup(b);break}}).blur(function(){closePopup(b)}).focus()}function popup_confirm(b,c){var a=openPopup();a.append($("<h4/>").text(b)).append($("<button/>").text("No")).append($("<button/>").text("Yes"));a.find("button").each(function(){var d=$(this).text()=="Yes";if(!d){$(this).focus()}$(this).click(function(){closePopup(a);if(c){c(d)}})})}function popup_information(b,c){var a=openPopup();a.css("cursor","pointer").append($("<h4/>").text(b)).click(function(){closePopup(a);if(c){c()}})}$(window).bind("hashchange",function(){hashHandler(true)});function hashHandler(a){var d=window.location.hash.substring(1);if(d==""){d=id2hash(getCurrentId())}try{var e=hash2id(d);showPage(e,a);updateTitle(id2hash(e))}catch(c){var b=404;if(new RegExp("[0-9]{3}error").test(d)){b=parseInt(d.substring(0,3))}showError(b);updateTitle(errorText(b))}}function getCurrentId(){return parseInt($("section").filter(function(){return $(this).css("display")!="none"}).attr("id").substring(8))}function id2hash(a){return $("#nav-a-"+a).text()}function hash2id(a){return parseInt($("#nav").find("a").filter(function(){return $(this).text()==a}).attr("id").substring(6))}function showPage(c,a){var b=getCurrentId();if(c!=b){if(a){$("#section-"+b).slideUp("slow");$("#section-"+c).slideDown("slow",function(){$("#section-"+c).packery()})}else{$("#section-"+c).show();$("#section-"+b).hide()}$("#section-"+c).show();$("#nav-li-"+c).addClass("current");$("#nav-li-"+b).removeClass()}}function showError(a){popup_information(errorText(a),function(){window.location.hash=id2hash(getCurrentId())})}function updateTitle(a){document.title=$("#name").text()+" | "+a}function slideTop(){$("html, body").animate({scrollTop:0},"120")}function retile(a){if(a){a.closest("section").packery()}else{$("section").packery()}}function toggleBlock(a){var b=$(a).closest(".block");if(b.siblings().size()){b.toggleClass("expanded");retile($(a))}else{b.find(".content").slideToggle()}}function toggleBib(a){$(a).closest(".bibentry").find(".bibtray").toggle();retile($(a))}function errorText(a){switch(a){case 400:return"400 Bad Request";case 401:return"401 Unauthorized";case 403:return"403 Forbidden";case 404:return"404 Not Found";case 502:return"502 Bad Gateway";default:return"Undocumented error ("+a+")"}}function buildNav(){$("#nav, #mininav").find("a").filter(function(){return $(this).attr("id")}).each(function(){$(this).attr("href","#");$(this).click(function(){window.location.hash=$(this).text();return false})})}$(function(){buildNav();hashHandler(false)});